@model ArticlePageViewModel

@{
    ViewData["Title"] = @Model.Title;
}

@section Head
{
    <meta property="og:locale" content="tr_TR" />
    <meta property="og:url" content="https://www.techarsiv.com/@Model.Url">
    <meta property="og:type" content="article">
    <meta property="og:title" content="@Model.Title | Techarsiv.com">
    <meta property="og:description" content="@Model.SubTitle">
    <meta property="og:image" content="https://techarsiv.com@(Model.image)">
    <meta property="og:site_name" content="Techarsiv">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="BugraOzdemir58">
    <meta name="twitter:creator" content="BugraOzdemir58">  
    <meta name="twitter:title" content="@Model.Title | Techarsiv">
    <meta name="twitter:description" content="@Model.SubTitle">
    <meta name="twitter:image" content="https://techarsiv.com@(@Model.image)">
    
    <meta itemprop="name" content="@Model.Title | Techarsiv.com">  
    <meta itemprop="description" content="@Model.SubTitle">  
    <meta itemprop="image" content="https://techarsiv.com@(Model.image)">
        
    
    
    
    <style>
        .custom {
            font-family: "Gill Sans", sans-serif;
            font-size: 20px;
            color: gray;
        }
        .custom a {
            text-decoration: none;
            color: #cc0000;
        }
        blockquote {
          margin: 0;
        }
        
        blockquote p {
          padding: 15px;
          background: #eee;
          border-radius: 5px;
        }
        
        blockquote p::before {
          content: '\201C';
        }
        
        blockquote p::after {
          content: '\201D';
        }
        
        figcaption {
            text-align: center;
            font-size: 1.1rem;
        }
       
    </style>
}


<div class="row mt-3">
    <div class="col-lg-9">
        <a asp-area="Main"
           asp-controller="Home"
           asp-action="tag"
           asp-route-tagUrl="@Model.TagUrl"
           title="bu konu hakkında daha fazla yazı">
            <span class="mb-2 badge badge-secondary">
                @Model.TagName
            </span>
        </a>
        <h1>@Model.Title</h1>
        <p class="text-muted">Yazan
            <a asp-area=""
               asp-controller="User"
               asp-action="Index"
               asp-route-username="@Model.Username"
               style="text-decoration: none;color: #cc0000;"
               title="yazar hakkında sayfa">
                @Model.Username
            </a>
            - @await Component.InvokeAsync("ShowTime", @Model.CreatedAt)
        </p>

        <div class="custom">
            @Html.Raw(@Model.Content)
        </div>
        <br/>
        
        
        
        
        
        <hr/>
        @await Component.InvokeAsync("Similar",new {tagId = @Model.TagId,articleId = @Model.ArticleId})
    </div>
    <div class="col-lg-3">
        @await Component.InvokeAsync("LastUploded", @Model.ArticleId)
    </div>
</div>


@section Scripts
{
    <script asp-append-version="true" src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("figure.image img").each(function () {
                $(this).width(), $(this).height(), $(this).css("max-width", "100%"),$(this).css("border-radius", "13px"), $(this).css("height", "auto"), $(this).css("margin-left", "auto"), $(this).css("margin-right", "auto");
            });
        });

    </script>
    <script>
        window.onload = function() {
            var divContainer = document.querySelector('.custom');
            var paragraphs = divContainer.querySelectorAll('p');
            paragraphs.forEach(function(paragraph) {
                var content = paragraph.textContent.trim();
                if (content.startsWith('<iframe')) {
                    paragraph.classList.add('iframe-hidden');
                    var iframeContainer = document.createElement('div');
                    iframeContainer.innerHTML = content;
                    var iframe = iframeContainer.firstChild;
                    iframe.style.width = '100%'; // Genişliği %100 yap
                    iframe.style.height = '315px'; // Yüksekliği otomatik ayarla
                    paragraph.parentNode.replaceChild(iframe, paragraph);
                }
            });
        };
    </script>
    <script>
        var links = document.querySelectorAll('a');
        for (var i = 0; i < links.length; i++) {
            var href = links[i].getAttribute('href');
            if (href.indexOf('techarsiv') === -1) {
                links[i].setAttribute('rel', 'nofollow');
            }
        }
    </script>
    <script>
        var images = document.querySelectorAll('img');
        for (var i = 0; i < images.length; i++) {
            images[i].setAttribute('alt', 'ilgili resim');
        }
    </script>
}
